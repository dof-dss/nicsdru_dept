id: users
label: Users
migration_group: migrate_users
migration_tags:
  - dept_sites
class: Drupal\migrate\Plugin\Migration
field_plugin_method: alterFieldInstanceMigration
source:
  plugin: d7_user_uuid
  track_changes: true
process:
  uid:
    -
      plugin: skip_on_value
      method: row
      source: uid
      value:
        - 0
        - 1
  name: name
  pass: pass
  mail: mail
  created: created
  access: access
  login: login
  status: status
  timezone: timezone
  langcode:
    plugin: user_langcode
    source: entity_language
    fallback_to_site_default: false
  preferred_langcode:
    plugin: user_langcode
    source: language
    fallback_to_site_default: true
  preferred_admin_langcode:
    plugin: user_langcode
    source: language
    fallback_to_site_default: true
  init: init
  roles:
    - plugin: static_map
      source: roles
      map:
        3: 'author'
        4: 'supervisor'
        5: 'admin'
        6: 'homepage_supervisor'
        8: 'topic_supervisor'
        9: null
        10: 'homepage_supervisor'
        11: 'stats_author'
        12: 'stats_supervisor'
        13: null
        14: null
        15: 'topic_layout_supervisor'
        16: null
        17: null
        default_value: null
  field_domain_access:
    - plugin: skip_on_value
      method: row
      source: uid
      value:
        - 1
    - plugin: skip_on_empty
      method: row
      source: domain_access_user/0/target_id
    - plugin: static_map
      bypass: true
      source: domain_access_user/0/target_id
      map:
        'newnigov': 'nigov'
        'execoffice': 'executiveoffice'
        'dfp': 'finance'
destination:
  plugin: entity:user
